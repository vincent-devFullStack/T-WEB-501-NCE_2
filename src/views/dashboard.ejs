<link rel="stylesheet" href="/style/dashboard.css" />

<div class="dashboard-admin">
  <header class="dashboard-header">
    <div>
      <h1>Console d'administration</h1>
      <p>Gérez l'ensemble des tables et appliquez les opérations CRUD en toute simplicité.</p>
    </div>
  </header>

  <div class="dashboard-content">
    <nav class="dashboard-tabs" role="tablist">
      <% adminTables.forEach((table, index) => { %>
        <button
          type="button"
          class="dashboard-tab <%= index === 0 ? 'is-active' : '' %>"
          data-table="<%= table.table %>"
          role="tab"
          aria-selected="<%= index === 0 ? 'true' : 'false' %>"
        >
          <span class="dashboard-tab__label"><%= table.label %></span>
          <span class="dashboard-tab__hint"><%= table.description %></span>
        </button>
      <% }) %>
    </nav>

    <section class="dashboard-panel" aria-live="polite">
      <header class="dashboard-panel__header">
        <div>
          <h2 id="admin-table-title">Chargement…</h2>
          <p class="muted" id="admin-table-description"></p>
        </div>
        <div class="dashboard-panel__actions">
          <label class="dashboard-search">
            <span class="sr-only">Rechercher</span>
            <input type="search" id="admin-table-search" placeholder="Rechercher…" />
          </label>
          <button type="button" class="btn" id="admin-create-btn">Nouvel enregistrement</button>
        </div>
      </header>

      <div class="dashboard-panel__table">
        <div class="table-container">
          <table class="data-table" id="admin-data-table">
            <thead></thead>
            <tbody>
              <tr>
                <td class="loading-cell">Chargement des données…</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <footer class="dashboard-panel__footer">
        <div class="pagination-info" id="admin-pagination-info"></div>
        <div class="pagination-controls">
          <button type="button" class="btn-secondary pagination-btn" id="admin-prev-page" disabled>
            ← Précédent
          </button>
          <span id="admin-current-page" class="pagination-current">Page 1</span>
          <button type="button" class="btn-secondary pagination-btn" id="admin-next-page" disabled>
            Suivant →
          </button>
          <label class="pagination-size">
            <span class="sr-only">Éléments par page</span>
            <select id="admin-page-size">
              <option value="10">10 / page</option>
              <option value="25">25 / page</option>
              <option value="50">50 / page</option>
            </select>
          </label>
        </div>
      </footer>
    </section>
  </div>
</div>

<div class="admin-modal" id="admin-modal" aria-hidden="true">
  <div class="admin-modal__dialog" role="dialog" aria-modal="true" aria-labelledby="admin-modal-title">
    <header class="admin-modal__header">
      <h2 id="admin-modal-title">Nouvel enregistrement</h2>
      <button type="button" class="admin-modal__close" id="admin-modal-close" aria-label="Fermer">✕</button>
    </header>
    <form id="admin-form">
      <div class="admin-form-body" id="admin-form-fields"></div>
      <footer class="admin-form-footer">
        <button type="button" class="btn-secondary" id="admin-form-cancel">Annuler</button>
        <button type="submit" class="btn" id="admin-form-submit">Enregistrer</button>
      </footer>
    </form>
  </div>
</div>

<div class="admin-toast-container" id="admin-toast-container" aria-live="assertive" aria-atomic="true"></div>

<script>
  window.__ADMIN_TABLES__ = <%- JSON.stringify(adminTables) %>;
</script>
<script type="module" src="/js/admin-dashboard.js"></script>
